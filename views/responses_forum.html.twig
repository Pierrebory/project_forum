{% extends "layout.html.twig" %}
	
	{% block title %}Un sujet{% endblock %}
	
	{% block content %}
        <br><br>
<br><br><br>
       <div style="background-color: #f5f5f5;  color:grey">
           
        <h2 style="text-align: center">  {{ subject.title}}</h2>
        <article style="text-align: center; border-radius: 1%; background-color: white; align-items: center; margin-left: 40em; margin-right: 40em; margin-bottom: 2em; word-wrap: break-word">
                
				
				<img style="margin-top: 1em; margin-left: 1em; margin-right: 45em; padding-top: -1em;" src="{{ asset('img/avatar/' ~ subject.user_id.avatar) }}" class="img img-responsive img-rounded" width="75"><p style="margin-top: -2em;">Message publié le {{ subject.date_message }}
				par {{ subject.user_id.username }}</p><hr style="margin-left: 3em; margin-right: 3em; border: 0;
    height: 1px;
    background: #333;
    background-image: linear-gradient(to right, #ccc, #333, #ccc);">
                <p style="padding: 1em;">{{ subject.message }}</p>
			</article>

        
            {% for response in responses %}
			 <article style="text-align: center; border-radius: 1%; background-color: white; align-items: center; margin-left: 40em; margin-right: 40em; margin-bottom: 2em;  word-wrap: break-word">
                
				
				<img style="margin-top: 1em; margin-left: 1em; margin-right: 45em" src="{{ asset('img/avatar/' ~ response.user_id.avatar) }}" class="img img-responsive img-rounded" width="75"><p style="margin-top: -2em;">Message publié le {{ response.date_message }}
				par {{ response.user_id.username }}</p><hr style="margin-left: 3em; margin-right: 3em; border: 0;
    height: 1px;
    background: #333;
    background-image: linear-gradient(to right, #ccc, #333, #ccc);">    
                <p style="padding: 1em; margin-left: -42em;">{{ response.message }}</p>
			</article>
        {%endfor%}

{{ form_start(responsesForm, { 'attr': {'class': 'form-horizontal'} }) }}
                <div class="form-group" style="margin-left: 25em; margin-right: 25em">
                    {{ form_label(responsesForm.message, null) }}
                    <div>
                        {%if not responsesForm.vars.valid %}
                    <div class="alert alert-danger">
                        {{ form_errors(responsesForm.message) }}
                    </div>
                        {%endif%}
                        {{ form_widget(responsesForm.message, { 'attr':  {
                            'class': 'form-control ckeditor'
                        }}) }}
                    </div>
                </div>

                <br>
                <div class="form-group" class="col-sm-12" style="margin-left: 60em; margin-right: 60em">
                    <input type="submit" class="btn btn-primary btn-lg" value="Envoyer" />
                </div><br>




            {{ form_end(responsesForm) }}
</div>
{% endblock %}
{%block javascript%}

<script src="https://cdn.ckeditor.com/ckeditor5/1.0.0-alpha.2/classic/ckeditor.js"></script>


<script>
    ClassicEditor
        .create( document.querySelector( '.ckeditor') ,
            {
            ckfinder: {
               uploadUrl: "{{ asset('/../../web/img/img') }}"
            } } ) 
        .catch( error => {
            console.error( error );
        } );

</script>

{%endblock%}